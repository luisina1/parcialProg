<!-- Bot√≥n para alternar entre todos y favoritos -->
<button (click)="toggleFavoritesView()">
  {{ showFavoritesOnly ? 'Ver todos' : 'Ver favoritos' }}
</button>

<!-- Input de b√∫squeda -->
<input
  type="text"
  placeholder="Buscar personaje..."
  [(ngModel)]="searchTerm"
  (input)="searchCharacters()"
/>

<!-- Filtros -->
<div class="filters">
  <select [(ngModel)]="filterStatus" (change)="updateFilters()" [disabled]="showFavoritesOnly">
    <option value="">Estado: Todos</option>
    <option value="alive">Alive</option>
    <option value="dead">Dead</option>
    <option value="unknown">Unknown</option>
  </select>

  <select [(ngModel)]="filterSpecies" (change)="updateFilters()" [disabled]="showFavoritesOnly">
    <option value="">Especie: Todas</option>
    <option value="Human">Human</option>
    <option value="Alien">Alien</option>
  </select>

  <select [(ngModel)]="filterGender" (change)="updateFilters()" [disabled]="showFavoritesOnly">
    <option value="">G√©nero: Todos</option>
    <option value="Male">Male</option>
    <option value="Female">Female</option>
    <option value="Genderless">Genderless</option>
    <option value="unknown">Unknown</option>
  </select>
</div>

<!-- Orden -->
<select [(ngModel)]="sortOption" (change)="sortCharacters()" [disabled]="showFavoritesOnly">
  <option value="">Sin orden</option>
  <option value="name-asc">Nombre A‚ÄìZ</option>
  <option value="name-desc">Nombre Z‚ÄìA</option>
</select>

<!-- Lista de personajes -->
<div *ngIf="characters.length > 0; else loadingTemplate" class="characters-container">
  <div *ngFor="let character of characters" class="card" (click)="openModal(character)">
    <div class="card-left">
      <img [src]="character.image" [alt]="character.name" class="character-image" />
      <button
        (click)="toggleFavorite(character); $event.stopPropagation()"
        class="favorite-btn"
        aria-label="Toggle favorite"
      >
        <span *ngIf="isFavorite(character); else notFavorite" class="filled-heart">‚ù§Ô∏è</span>
        <ng-template #notFavorite>ü§ç</ng-template>
      </button>
    </div>

    <div class="character-info">
      <h2 class="character-name">{{ character.name }}</h2>
      <p><strong>Status:</strong> <span [ngClass]="character.status.toLowerCase()">{{ character.status }}</span></p>
      <p><strong>Species:</strong> {{ character.species }}</p>
      <p><strong>Gender:</strong> {{ character.gender }}</p>
      <p><strong>Origin:</strong> {{ character.origin.name }}</p>
      <p><strong>Location:</strong> {{ character.location.name }}</p>
    </div>
  </div>
</div>

<!-- Template loading -->
<ng-template #loadingTemplate>
  <p>Loading characters...</p>
</ng-template>

<!-- Paginaci√≥n -->
<div class="pagination" *ngIf="!showFavoritesOnly">
  <button (click)="prevPage()" [disabled]="currentPage === 1">Anterior</button>
  <span>P√°gina {{ currentPage }} de {{ totalPages }}</span>
  <button (click)="nextPage()" [disabled]="currentPage === totalPages">Siguiente</button>
</div>

<!-- Modal -->
<app-character-detail
  *ngIf="selectedCharacter"
  [character]="selectedCharacter"
  [episodes]="episodesNames"
  (close)="closeModal()"
></app-character-detail>
